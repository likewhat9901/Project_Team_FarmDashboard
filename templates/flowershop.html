<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="stylesheet" href="../static/css/ui_jk.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon"></div>
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="/dashboard" class="nav-link">
                    <span class="nav-icon">ğŸ </span>
                    ëŒ€ì‰¬ë³´ë“œ
                </a>
            </li>
            <li class="nav-item">
                <a href="/education" class="nav-link">
                    <span class="nav-icon">ğŸ«</span>
                    ë†ì—…êµìœ¡ê¸°ê´€
                </a>
            </li>
            <li class="nav-item">
                <a href="/flowershop" class="nav-link">
                    <span class="nav-icon">ğŸŒ¼</span>
                    ê½ƒì§‘ ì§€ë„
                </a>
            </li>
            <li class="nav-item">
                <a href="/growplant" class="nav-link">
                    <span class="nav-icon">
                        <img src="/static/images/growplant.png" alt="ì‹ë¬¼ ì„±ì¥ ì•„ì´ì½˜" style="width:21px; height:21px; vertical-align:middle;">
                    </span>
                    ì‹ë¬¼ ì„±ì¥ ì˜ˆì¸¡
                </a>
            </li>
            <li class="nav-item">
                <a href="/hurt" class="nav-link">
                    <span class="nav-icon">ğŸš‘</span>
                     ì‹ë¬¼ ë³‘ëª… ì§„ë‹¨
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
<div class="main-content">
    <div class="header">
        <h1 class="page-title">ì „êµ­ ê½ƒì§‘ ì§€ë„ğŸŒ¼</h1>
    </div>

    <!-- ë¡œë”© ë©”ì‹œì§€ -->
    <div id="loading-message" style="
        display: flex;
        justify-content: center;
        align-items: center;
        height: 85vh;
        font-size: 18px;
        font-weight: bold;
        color: #4caf50;
        background: white;
    ">
        ğŸŒ¼ ì „êµ­ ê½ƒì§‘ ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...
    </div>

    <div class="map-container" style="height:85vh; display:none;" id="map-container">
        <iframe
            src="./static/iframes/flowershop_map.html"
            width="100%"
            height="100%"
            frameborder="0"
            id="flowershop-iframe"
        ></iframe>
    </div>
    </div>

<script>
    const iframe = document.getElementById('flowershop-iframe');
    const loadingMessage = document.getElementById('loading-message');
    const mapContainer = document.getElementById('map-container');

    // iframeì´ ë¡œë“œë˜ë©´ ì‹¤í–‰
    iframe.onload = function() {
        loadingMessage.style.display = 'none'; // ë¡œë”© ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
        mapContainer.style.display = 'block'; // ì§€ë„ í‘œì‹œ
    };
</script>


    
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ -->
    <script>
        // ëª¨ë“  nav-link ìš”ì†Œ ì„ íƒ
        const navLinks = document.querySelectorAll('.nav-link');
        // í˜„ì¬ URL ê²½ë¡œ ì–»ê¸°
        const currentPath = window.location.pathname;

        navLinks.forEach(link => {
        const href = link.getAttribute('href');

        // hrefê°€ # ì´ê±°ë‚˜ ë¹ˆ ê°’ì´ë©´ ë¹„êµí•˜ì§€ ì•ŠìŒ
        if (!href || href === '#') return;

        const linkPath = new URL(href, window.location.origin).pathname;

        if (linkPath === currentPath) {
            link.classList.add('active');
        }
        });
    </script>

</body>
</html>